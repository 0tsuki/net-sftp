<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Net::SFTP::Session</title>
    <meta content='text/html; charset=US-ASCII' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Net::SFTP::Session
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../../files/lib/net/sftp/session_rb.html">lib/net/sftp/session.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../SFTP.html">SFTP</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>The <a href="Session.html">Session</a> class encapsulates a single <a
            href="../SFTP.html">SFTP</a> channel on a <a
            href="../SSH.html">Net::SSH</a> connection. Instances of this class are
            what most applications will interact with most, as it provides access to
            both low-level (mkdir, rename, remove, symlink, etc.) and high-level
            (upload, download, etc.) <a href="../SFTP.html">SFTP</a> operations.</p>
            
            <p>Although <a href="Session.html">Session</a> makes it easy to do <a
            href="../SFTP.html">SFTP</a> operations serially, you can also set up
            multiple operations to be done in parallel, too, without needing to resort
            to threading. You merely need to fire off the requests, and then run the
            event loop until all of the requests have completed:</p>
            
            <pre class="ruby"><span class="ruby-identifier">handle1</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">open!</span>(<span class="ruby-string">&quot;/path/to/file1&quot;</span>)&#x000A;<span class="ruby-identifier">handle2</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">open!</span>(<span class="ruby-string">&quot;/path/to/file2&quot;</span>)&#x000A;&#x000A;<span class="ruby-identifier">r1</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle1</span>, <span class="ruby-value">0</span>, <span class="ruby-value">1024</span>)&#x000A;<span class="ruby-identifier">r2</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle2</span>, <span class="ruby-value">0</span>, <span class="ruby-value">1024</span>)&#x000A;<span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">loop</span> { [<span class="ruby-identifier">r1</span>, <span class="ruby-identifier">r2</span>].<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">pending?</span> } }&#x000A;&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;chunk #1: #{r1.response[:data]}&quot;</span>&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;chunk #2: #{r2.response[:data]}&quot;</span></pre>
            
            <p>By passing blocks to the operations, you can set up powerful state
            machines, to fire off subsequent operations. In fact, the <a
            href="Operations/Upload.html">Net::SFTP::Operations::Upload</a> and <a
            href="Operations/Download.html">Net::SFTP::Operations::Download</a> classes
            set up such state machines, so that multiple uploads and/or downloads can
            be running simultaneously.</p>
            
            <p>The convention with the names of the operations is as follows: if the
            method name ends with an exclamation mark, like <a
            href="Session.html#method-i-read-21">read!</a>, it will be synchronous
            (e.g., it will block until the server responds). Methods without an
            exclamation mark (e.g. <a href="Session.html#method-i-read">read</a>) are
            asynchronous, and return before the server has responded. You will need to
            make sure the <a href="../SSH.html">SSH</a> event loop is run in order to
            process these requests. (See <a
            href="Session.html#method-i-loop">loop</a>.)</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-new">new</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-block">block</a></li>
              <li><a target="docwin" href="#method-i-block-21">block!</a></li>
              <li><a target="docwin" href="#attribute-i-channel">channel</a></li>
              <li><a target="docwin" href="#method-i-close">close</a></li>
              <li><a target="docwin" href="#method-i-close-21">close!</a></li>
              <li><a target="docwin" href="#method-i-close_channel">close_channel</a></li>
              <li><a target="docwin" href="#method-i-closed-3F">closed?</a></li>
              <li><a target="docwin" href="#method-i-connect">connect</a></li>
              <li><a target="docwin" href="#method-i-connect-21">connect!</a></li>
              <li><a target="docwin" href="#method-i-dir">dir</a></li>
              <li><a target="docwin" href="#method-i-download">download</a></li>
              <li><a target="docwin" href="#method-i-download-21">download!</a></li>
              <li><a target="docwin" href="#method-i-file">file</a></li>
              <li><a target="docwin" href="#method-i-fsetstat">fsetstat</a></li>
              <li><a target="docwin" href="#method-i-fsetstat-21">fsetstat!</a></li>
              <li><a target="docwin" href="#method-i-fstat">fstat</a></li>
              <li><a target="docwin" href="#method-i-fstat-21">fstat!</a></li>
              <li><a target="docwin" href="#method-i-link">link</a></li>
              <li><a target="docwin" href="#method-i-link-21">link!</a></li>
              <li><a target="docwin" href="#method-i-loop">loop</a></li>
              <li><a target="docwin" href="#method-i-lstat">lstat</a></li>
              <li><a target="docwin" href="#method-i-lstat-21">lstat!</a></li>
              <li><a target="docwin" href="#method-i-mkdir">mkdir</a></li>
              <li><a target="docwin" href="#method-i-mkdir-21">mkdir!</a></li>
              <li><a target="docwin" href="#method-i-open">open</a></li>
              <li><a target="docwin" href="#method-i-open-21">open!</a></li>
              <li><a target="docwin" href="#method-i-open-3F">open?</a></li>
              <li><a target="docwin" href="#method-i-opendir">opendir</a></li>
              <li><a target="docwin" href="#method-i-opendir-21">opendir!</a></li>
              <li><a target="docwin" href="#method-i-opening-3F">opening?</a></li>
              <li><a target="docwin" href="#attribute-i-pending_requests">pending_requests</a></li>
              <li><a target="docwin" href="#attribute-i-protocol">protocol</a></li>
              <li><a target="docwin" href="#method-i-read">read</a></li>
              <li><a target="docwin" href="#method-i-read-21">read!</a></li>
              <li><a target="docwin" href="#method-i-readdir">readdir</a></li>
              <li><a target="docwin" href="#method-i-readdir-21">readdir!</a></li>
              <li><a target="docwin" href="#method-i-readlink">readlink</a></li>
              <li><a target="docwin" href="#method-i-readlink-21">readlink!</a></li>
              <li><a target="docwin" href="#method-i-realpath">realpath</a></li>
              <li><a target="docwin" href="#method-i-realpath-21">realpath!</a></li>
              <li><a target="docwin" href="#method-i-remove">remove</a></li>
              <li><a target="docwin" href="#method-i-remove-21">remove!</a></li>
              <li><a target="docwin" href="#method-i-rename">rename</a></li>
              <li><a target="docwin" href="#method-i-rename-21">rename!</a></li>
              <li><a target="docwin" href="#method-i-rmdir">rmdir</a></li>
              <li><a target="docwin" href="#method-i-rmdir-21">rmdir!</a></li>
              <li><a target="docwin" href="#method-i-send_packet">send_packet</a></li>
              <li><a target="docwin" href="#attribute-i-session">session</a></li>
              <li><a target="docwin" href="#method-i-setstat">setstat</a></li>
              <li><a target="docwin" href="#method-i-setstat-21">setstat!</a></li>
              <li><a target="docwin" href="#method-i-stat">stat</a></li>
              <li><a target="docwin" href="#method-i-stat-21">stat!</a></li>
              <li><a target="docwin" href="#attribute-i-state">state</a></li>
              <li><a target="docwin" href="#method-i-symlink">symlink</a></li>
              <li><a target="docwin" href="#method-i-symlink-21">symlink!</a></li>
              <li><a target="docwin" href="#method-i-unblock">unblock</a></li>
              <li><a target="docwin" href="#method-i-unblock-21">unblock!</a></li>
              <li><a target="docwin" href="#method-i-upload">upload</a></li>
              <li><a target="docwin" href="#method-i-upload-21">upload!</a></li>
              <li><a target="docwin" href="#method-i-write">write</a></li>
              <li><a target="docwin" href="#method-i-write-21">write!</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>Net::SSH::Loggable</li>
                <li><a target="docwin" href="Constants/PacketTypes.html">Net::SFTP::Constants::PacketTypes</a></li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>HIGHEST_PROTOCOL_VERSION_SUPPORTED</td>
                    <td>=</td>
                    <td class='context-item-value'>6</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>The highest protocol version supported by the <a
                      href="../SFTP.html">Net::SFTP</a> library.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='aliases-list'>
              <h2>Public Instance Aliases</h2>
              <div class='name-list'>
                <table summary='Public Instance Aliases'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>loop_forever</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-loop">loop</a></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-channel'>channel</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The Net::SSH::Connection::Channel object that the <a
                      href="../SFTP.html">SFTP</a> session is being processed by.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-pending_requests'>pending_requests</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The hash of pending requests. Any requests that have been sent and which
                      the server has not yet responded to will be represented here.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-protocol'>protocol</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The protocol instance being used by this <a href="../SFTP.html">SFTP</a>
                      session. Useful for querying the protocol version in effect.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-session'>session</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>A reference to the <a href="../SSH.html">Net::SSH</a> session object that
                      powers this <a href="../SFTP.html">SFTP</a> session.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-state'>state</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The state of the <a href="../SFTP.html">SFTP</a> connection. It will be
                      :opening, :subsystem, :init, :open, or :closed.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(session, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new <a href="../SFTP.html">Net::SFTP</a> instance atop the given
                  <a href="../SSH.html">Net::SSH</a> connection. This will return
                  immediately, before the <a href="../SFTP.html">SFTP</a> connection has been
                  properly initialized. Once the connection is ready, the given block will be
                  called. If you want to block until the connection has been initialized, try
                  this:</p>
                  
                  <pre>sftp = Net::SFTP::Session.new(ssh)&#x000A;sftp.loop { sftp.opening? }</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 78</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-ivar">@session</span>    = <span class="ruby-identifier">session</span>&#x000A;  <span class="ruby-ivar">@input</span>      = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">new</span>&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">logger</span>&#x000A;  <span class="ruby-ivar">@state</span>      = <span class="ruby-value">:closed</span>&#x000A;&#x000A;  <span class="ruby-identifier">connect</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-block'>
                <a name='method-i-block'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>block(handle, offset, length, mask) -> request</div>
                    <div>block(handle, offset, length, mask) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a byte-range lock on the file specified by the given
                  <code>handle</code>. This operation is only available in <a
                  href="../SFTP.html">SFTP</a> protocol versions 6 and higher. The lock may
                  be either mandatory or advisory.</p>
                  
                  <p>The <code>handle</code> parameter is a file handle, as obtained by the <a
                  href="Session.html#method-i-open">open</a> method.</p>
                  
                  <p>The <code>offset</code> and <code>length</code> parameters describe the
                  location and size of the byte range.</p>
                  
                  <p>The <code>mask</code> describes how the lock should be defined, and
                  consists of some combination of the following bit masks:</p>
                  <ul><li>
                  <p>0x0040 - Read lock. The byte range may not be accessed for reading by via
                  any other handle, though it may be written to.</p>
                  </li><li>
                  <p>0x0080 - Write lock. The byte range may not be written to via any other
                  handle, though it may be read from.</p>
                  </li><li>
                  <p>0x0100 - Delete lock. No other handle may delete this file.</p>
                  </li><li>
                  <p>0x0200 - Advisory lock. The server need not honor the lock instruction.</p>
                  </li></ul>
                  
                  <p>Once created, the lock may be removed via the <a
                  href="Session.html#method-i-unblock">unblock</a> method.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-block-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-block-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 691</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">block</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:block</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-block-21'>
                <a name='method-i-block-21'></a>
                <div class='synopsis'>
                  <span class='name'>block!</span>
                  <span class='arguments'>(handle, offset, length, mask, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-block">block</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-block-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-block-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 698</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">block!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">block</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-close'>
                <a name='method-i-close'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>close(handle) -> request</div>
                    <div>close(handle) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Closes an open handle, whether obtained via <a
                  href="Session.html#method-i-open">open</a>, or <a
                  href="Session.html#method-i-opendir">opendir</a>. Returns immediately with
                  a <a href="Request.html">Request</a> object. If a block is given, it will
                  be invoked when the server responds.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">open</span>(<span class="ruby-string">&quot;/path/to/file&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;fail!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">ok?</span>&#x000A;  <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">close</span>(<span class="ruby-identifier">response</span>[:<span class="ruby-identifier">handle</span>])&#x000A;<span class="ruby-keyword">end</span>&#x000A;<span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">loop</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-close-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-close-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 207</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">close</span>(<span class="ruby-identifier">handle</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:close</span>, <span class="ruby-identifier">handle</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-close-21'>
                <a name='method-i-close-21'></a>
                <div class='synopsis'>
                  <span class='name'>close!</span>
                  <span class='arguments'>(handle, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-close">close</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it returns the <a
                  href="Response.html">Response</a> object for this request.</p>
                  
                  <pre>sftp.close!(handle)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-close-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-close-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 216</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">close!</span>(<span class="ruby-identifier">handle</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">close</span>(<span class="ruby-identifier">handle</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-close_channel'>
                <a name='method-i-close_channel'></a>
                <div class='synopsis'>
                  <span class='name'>close_channel</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Closes the <a href="../SFTP.html">SFTP</a> connection, but not the <a
                  href="../SSH.html">SSH</a> connection. Blocks until the session has
                  terminated. Once the session has terminated, further operations on this
                  object will result in errors. You can reopen the <a
                  href="../SFTP.html">SFTP</a> session via the <a
                  href="Session.html#method-i-connect">connect</a> method.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-close_channel-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-close_channel-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 727</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">close_channel</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">open?</span>&#x000A;  <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">close</span>&#x000A;  <span class="ruby-identifier">loop</span> { <span class="ruby-operator">!</span><span class="ruby-identifier">closed?</span> }&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-closed-3F'>
                <a name='method-i-closed-3F'></a>
                <div class='synopsis'>
                  <span class='name'>closed?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns true if the connection has been closed.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-closed-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-closed-3F-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 739</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">closed?</span>&#x000A;  <span class="ruby-identifier">state</span> <span class="ruby-operator">==</span> <span class="ruby-value">:closed</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-connect'>
                <a name='method-i-connect'></a>
                <div class='synopsis'>
                  <span class='name'>connect</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Attempts to establish an <a href="../SFTP.html">SFTP</a> connection over
                  the <a href="../SSH.html">SSH</a> session given when this object was
                  instantiated. If the object is already open, this will simply execute the
                  given block (if any), passing the <a href="../SFTP.html">SFTP</a> session
                  itself as argument. If the session is currently being opened, this will add
                  the given block to the list of callbacks, to be executed when the session
                  is fully open.</p>
                  
                  <p>This method does not block, and will return immediately. If you pass a
                  block to it, that block will be invoked when the connection has been fully
                  established. Thus, you can do something like this:</p>
                  
                  <pre>sftp.connect do&#x000A;  puts &quot;open!&quot;&#x000A;end</pre>
                  
                  <p>If you just want to block until the connection is ready, see the <a
                  href="Session.html#method-i-connect-21">connect!</a> method.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-connect-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-connect-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 766</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">connect</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">state</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:open</span>&#x000A;    <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:closed</span>&#x000A;    <span class="ruby-ivar">@state</span> = <span class="ruby-value">:opening</span>&#x000A;    <span class="ruby-ivar">@channel</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">open_channel</span>(&amp;<span class="ruby-identifier">method</span>(<span class="ruby-value">:when_channel_confirmed</span>))&#x000A;    <span class="ruby-ivar">@packet_length</span> = <span class="ruby-keyword">nil</span>&#x000A;    <span class="ruby-ivar">@protocol</span> = <span class="ruby-keyword">nil</span>&#x000A;    <span class="ruby-ivar">@on_ready</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">else</span> <span class="ruby-comment"># opening</span>&#x000A;    <span class="ruby-ivar">@on_ready</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">block</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-connect-21'>
                <a name='method-i-connect-21'></a>
                <div class='synopsis'>
                  <span class='name'>connect!</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Same as the <a href="Session.html#method-i-connect">connect</a> method, but
                  blocks until the <a href="../SFTP.html">SFTP</a> connection has been fully
                  initialized.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-connect-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-connect-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 785</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">connect!</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">connect</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">loop</span> { <span class="ruby-identifier">opening?</span> }&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-dir'>
                <a name='method-i-dir'></a>
                <div class='synopsis'>
                  <span class='name'>dir</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a <a href="Operations/Dir.html">Net::SFTP::Operations::Dir</a>
                  instance, which can be used to conveniently iterate over and search
                  directories on the remote server.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-string">&quot;/base/path&quot;</span>, <span class="ruby-string">&quot;*   /*.rb&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">entry</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">p</span> <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">name</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                  
                  <p>See <a href="Operations/Dir.html">Net::SFTP::Operations::Dir</a> for a more
                  detailed discussion of how to use this.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-dir-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-dir-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 153</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">dir</span>&#x000A;  <span class="ruby-ivar">@dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-download'>
                <a name='method-i-download'></a>
                <div class='synopsis'>
                  <span class='name'>download</span>
                  <span class='arguments'>(remote, local, options={}, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Initiates a download from <code>remote</code> to <code>local</code>,
                  asynchronously. This method will return a new <a
                  href="Operations/Download.html">Net::SFTP::Operations::Download</a>
                  instance, and requires that the event loop be run in order for the download
                  to progress. See <a
                  href="Operations/Download.html">Net::SFTP::Operations::Download</a> for a
                  full discussion of hos this method can be used.</p>
                  
                  <pre>download = sftp.download(&quot;/remote/path&quot;, &quot;/local/path&quot;)&#x000A;download.wait</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-download-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-download-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 114</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">download</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">options</span>={}, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Download</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-download-21'>
                <a name='method-i-download-21'></a>
                <div class='synopsis'>
                  <span class='name'>download!</span>
                  <span class='arguments'>(remote, local=nil, options={}, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-download">download</a>, but
                  blocks until the download is complete. If <code>local</code> is omitted,
                  downloads the file to an in-memory buffer and returns the result as a
                  string; otherwise, returns the <a
                  href="Operations/Download.html">Net::SFTP::Operations::Download</a>
                  instance.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-download-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-download-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 122</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">download!</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">local</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>={}, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">require</span> <span class="ruby-string">'stringio'</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">StringIO</span>)&#x000A;  <span class="ruby-identifier">destination</span> = <span class="ruby-identifier">local</span> <span class="ruby-operator">||</span> <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>&#x000A;  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">download</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">destination</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>).<span class="ruby-identifier">wait</span>&#x000A;  <span class="ruby-identifier">local</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">destination</span>.<span class="ruby-identifier">string</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-file'>
                <a name='method-i-file'></a>
                <div class='synopsis'>
                  <span class='name'>file</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns an <a
                  href="Operations/FileFactory.html">Net::SFTP::Operations::FileFactory</a>
                  instance, which can be used to mimic synchronous, IO-like file operations
                  on a remote file via <a href="../SFTP.html">SFTP</a>.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">file</span>.<span class="ruby-identifier">open</span>(<span class="ruby-string">&quot;/path/to/file&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-keyword">while</span> <span class="ruby-identifier">line</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">gets</span>&#x000A;    <span class="ruby-identifier">puts</span> <span class="ruby-identifier">line</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                  
                  <p>See <a
                  href="Operations/FileFactory.html">Net::SFTP::Operations::FileFactory</a>
                  and <a href="Operations/File.html">Net::SFTP::Operations::File</a> for more
                  details.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-file-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-file-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 140</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">file</span>&#x000A;  <span class="ruby-ivar">@file</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">FileFactory</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-fsetstat'>
                <a name='method-i-fsetstat'></a>
                <div class='synopsis'>
                  <span class='name'>fsetstat</span>
                  <span class='arguments'>(handle, attrs, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>The fsetstat method is identical to the <a
                  href="Session.html#method-i-setstat">setstat</a> method, with the exception
                  that it takes a <code>handle</code> as the first parameter, such as would
                  be obtained via the <a href="Session.html#method-i-open">open</a> or <a
                  href="Session.html#method-i-opendir">opendir</a> methods. (See the <a
                  href="Session.html#method-i-setstat">setstat</a> method for full
                  documentation.)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-fsetstat-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-fsetstat-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 378</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">fsetstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:fsetstat</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-fsetstat-21'>
                <a name='method-i-fsetstat-21'></a>
                <div class='synopsis'>
                  <span class='name'>fsetstat!</span>
                  <span class='arguments'>(handle, attrs, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to the <a href="Session.html#method-i-fsetstat">fsetstat</a>
                  method, but blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">fsetstat!</span>(<span class="ruby-identifier">handle</span>, :<span class="ruby-identifier">permissions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0644</span>)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-fsetstat-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-fsetstat-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 387</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">fsetstat!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">fsetstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-fstat'>
                <a name='method-i-fstat'></a>
                <div class='synopsis'>
                  <span class='name'>fstat</span>
                  <span class='arguments'>(handle, flags=nil, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>The fstat method is identical to the <a
                  href="Session.html#method-i-stat">stat</a> and <a
                  href="Session.html#method-i-lstat">lstat</a> methods, with the exception
                  that it takes a <code>handle</code> as the first parameter, such as would
                  be obtained via the <a href="Session.html#method-i-open">open</a> or <a
                  href="Session.html#method-i-opendir">opendir</a> methods. (See the <a
                  href="Session.html#method-i-lstat">lstat</a> method for full
                  documentation).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-fstat-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-fstat-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 327</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">fstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:fstat</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-fstat-21'>
                <a name='method-i-fstat-21'></a>
                <div class='synopsis'>
                  <span class='name'>fstat!</span>
                  <span class='arguments'>(handle, flags=nil, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to the <a href="Session.html#method-i-fstat">fstat</a> method,
                  but blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the attribute object describing the
                  path.</p>
                  
                  <pre>puts sftp.fstat!(handle).permissions</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-fstat-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-fstat-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 336</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">fstat!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">fstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:attrs</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-link'>
                <a name='method-i-link'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>link(new_link_path, existing_path, symlink=true) -> request</div>
                    <div>link(new_link_path, existing_path, symlink=true) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Attempts to create a link, either hard or symbolic. This operation is only
                  available in <a href="../SFTP.html">SFTP</a> protocol versions 6 and
                  higher. If the <code>symlink</code> paramter is true, a symbolic link will
                  be created, otherwise a hard link will be created. The link will be named
                  <code>new_link_path</code>, and will point to the path
                  <code>existing_path</code>.</p>
                  
                  <pre>sftp.link(&quot;/path/to/symlink&quot;, &quot;/path/to/file&quot;, true).wait</pre>
                  
                  <p>Note that <a href="Session.html#method-i-link">link</a> is only available
                  for <a href="../SFTP.html">SFTP</a> protocol 6 and higher. You can use <a
                  href="Session.html#method-i-symlink">symlink</a> for protocols 3 and
                  higher.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-link-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-link-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 654</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">link</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>=<span class="ruby-keyword">true</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:link</span>, <span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-link-21'>
                <a name='method-i-link-21'></a>
                <div class='synopsis'>
                  <span class='name'>link!</span>
                  <span class='arguments'>(new_link_path, existing_path, symlink=true, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-link">link</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                  
                  <pre>sftp.link!(&quot;/path/to/symlink&quot;, &quot;/path/to/file&quot;, true)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-link-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-link-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 663</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">link!</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>=<span class="ruby-keyword">true</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">link</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-loop'>
                <a name='method-i-loop'></a>
                <div class='synopsis'>
                  <span class='name'>loop</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Runs the <a href="../SSH.html">SSH</a> event loop while the given block
                  returns true. This lets you set up a state machine and then "fire it off".
                  If you do not specify a block, the event loop will run for as long as there
                  are any pending <a href="../SFTP.html">SFTP</a> requests. This makes it
                  easy to do thing like this:</p>
                  
                  <pre>sftp.remove(&quot;/path/to/file&quot;)&#x000A;sftp.loop</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-loop-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-loop-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 800</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">loop</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">block</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">pending_requests</span>.<span class="ruby-identifier">any?</span> }&#x000A;  <span class="ruby-identifier">session</span>.<span class="ruby-identifier">loop</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-lstat'>
                <a name='method-i-lstat'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>lstat(path, flags=nil) -> request</div>
                    <div>lstat(path, flags=nil) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>This method is identical to the <a
                  href="Session.html#method-i-stat">stat</a> method, with the exception that
                  it will not follow symbolic links (thus allowing you to stat the link
                  itself, rather than what it refers to). The <code>flags</code> parameter is
                  not used in <a href="../SFTP.html">SFTP</a> protocol versions prior to 4,
                  and will be ignored in those versions of the protocol that do not use it.
                  For those that do, however, you may provide hints as to which file
                  proprties you wish to query (e.g., if all you want is permissions, you
                  could pass the Net::SFTP::Protocol::V04::Attributes::F_PERMISSIONS flag as
                  the value for the <code>flags</code> parameter).</p>
                  
                  <p>The method returns immediately with a <a href="Request.html">Request</a>
                  object. If a block is given, it will be invoked when the server responds.
                  The :attrs property of the response will contain an Attributes instance
                  appropriate for the the protocol version (see <a
                  href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
                  href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
                  href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a>).</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">request</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-string">&quot;/path/to/file&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;fail!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">ok?</span>&#x000A;  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;permissions: %04o&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">response</span>[:<span class="ruby-identifier">attrs</span>].<span class="ruby-identifier">permissions</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;<span class="ruby-identifier">request</span>.<span class="ruby-identifier">wait</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-lstat-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-lstat-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 310</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:lstat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-lstat-21'>
                <a name='method-i-lstat-21'></a>
                <div class='synopsis'>
                  <span class='name'>lstat!</span>
                  <span class='arguments'>(path, flags=nil, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to the <a href="Session.html#method-i-lstat">lstat</a> method,
                  but blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the attribute object describing the
                  path.</p>
                  
                  <pre>puts sftp.lstat!(&quot;/path/to/file&quot;).permissions</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-lstat-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-lstat-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 319</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">lstat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:attrs</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-mkdir'>
                <a name='method-i-mkdir'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>mkdir(path, attrs={}) -> request</div>
                    <div>mkdir(path, attrs={}) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates the named directory on the remote server. If an attribute hash is
                  given, it must map to the set of attributes supported by the version of the
                  <a href="../SFTP.html">SFTP</a> protocol in use. (See <a
                  href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
                  href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
                  href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a>.)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">mkdir</span>(<span class="ruby-string">&quot;/path/to/directory&quot;</span>, :<span class="ruby-identifier">permissions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0550</span>).<span class="ruby-identifier">wait</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-mkdir-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-mkdir-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 488</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>={}, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:mkdir</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-mkdir-21'>
                <a name='method-i-mkdir-21'></a>
                <div class='synopsis'>
                  <span class='name'>mkdir!</span>
                  <span class='arguments'>(path, attrs={}, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-mkdir">mkdir</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">mkdir!</span>(<span class="ruby-string">&quot;/path/to/directory&quot;</span>, :<span class="ruby-identifier">permissions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0550</span>)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-mkdir-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-mkdir-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 497</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">mkdir!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>={}, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-open'>
                <a name='method-i-open'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>open(path, flags="r", options={}) -> request</div>
                    <div>open(path, flags="r", options={}) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Opens a file on the remote server. The <code>flags</code> parameter
                  determines how the flag is open, and accepts the same format as IO#open
                  (e.g., either a string like "r" or "w", or a combination of the IO
                  constants). The <code>options</code> parameter is a hash of attributes to
                  be associated with the file, and varies greatly depending on the <a
                  href="../SFTP.html">SFTP</a> protocol version in use, but some (like
                  :permissions) are always available.</p>
                  
                  <p>Returns immediately with a <a href="Request.html">Request</a> object. If a
                  block is given, it will be invoked when the server responds, with a <a
                  href="Response.html">Response</a> object as the only parameter. The :handle
                  property of the response is the handle of the opened file, and may be
                  passed to other methods (like <a
                  href="Session.html#method-i-close">close</a>, <a
                  href="Session.html#method-i-read">read</a>, <a
                  href="Session.html#method-i-write">write</a>, and so forth).</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">open</span>(<span class="ruby-string">&quot;/path/to/file&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;fail!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">ok?</span>&#x000A;  <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">close</span>(<span class="ruby-identifier">response</span>[:<span class="ruby-identifier">handle</span>])&#x000A;<span class="ruby-keyword">end</span>&#x000A;<span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">loop</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-open-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-open-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 181</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-string">&quot;r&quot;</span>, <span class="ruby-identifier">options</span>={}, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:open</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-open-21'>
                <a name='method-i-open-21'></a>
                <div class='synopsis'>
                  <span class='name'>open!</span>
                  <span class='arguments'>(path, flags="r", options={}, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-open">open</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the handle of the newly opened
                  file.</p>
                  
                  <pre>handle = sftp.open!(&quot;/path/to/file&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-open-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-open-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 190</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">open!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-string">&quot;r&quot;</span>, <span class="ruby-identifier">options</span>={}, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:handle</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-open-3F'>
                <a name='method-i-open-3F'></a>
                <div class='synopsis'>
                  <span class='name'>open?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns true if the connection has been initialized.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-open-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-open-3F-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 734</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">open?</span>&#x000A;  <span class="ruby-identifier">state</span> <span class="ruby-operator">==</span> <span class="ruby-value">:open</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-opendir'>
                <a name='method-i-opendir'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>opendir(path) -> request</div>
                    <div>opendir(path) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Attempts to open a directory on the remote host for reading. Once the
                  handle is obtained, directory entries may be retrieved using the <a
                  href="Session.html#method-i-readdir">readdir</a> method. The method returns
                  immediately with a <a href="Request.html">Request</a> object. If a block is
                  given, it will be invoked when the server responds.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">opendir</span>(<span class="ruby-string">&quot;/path/to/directory&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;fail!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">ok?</span>&#x000A;  <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">close</span>(<span class="ruby-identifier">response</span>[:<span class="ruby-identifier">handle</span>])&#x000A;<span class="ruby-keyword">end</span>&#x000A;<span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">loop</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-opendir-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-opendir-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 405</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">opendir</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:opendir</span>, <span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-opendir-21'>
                <a name='method-i-opendir-21'></a>
                <div class='synopsis'>
                  <span class='name'>opendir!</span>
                  <span class='arguments'>(path, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-opendir">opendir</a>, but
                  blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return a handle to the given path.</p>
                  
                  <pre>handle = sftp.opendir!(&quot;/path/to/directory&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-opendir-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-opendir-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 414</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">opendir!</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">opendir</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:handle</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-opening-3F'>
                <a name='method-i-opening-3F'></a>
                <div class='synopsis'>
                  <span class='name'>opening?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns true if the connection is in the process of being initialized
                  (e.g., it is not closed, but is not yet fully open).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-opening-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-opening-3F-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 745</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">opening?</span>&#x000A;  <span class="ruby-operator">!</span>(<span class="ruby-identifier">open?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">closed?</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-read'>
                <a name='method-i-read'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>read(handle, offset, length) -> request</div>
                    <div>read(handle, offset, length) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Requests that <code>length</code> bytes, starting at <code>offset</code>
                  bytes from the beginning of the file, be read from the file identified by
                  <code>handle</code>. (The <code>handle</code> should be a value obtained
                  via the <a href="Session.html#method-i-open">open</a> method.)  Returns
                  immediately with a <a href="Request.html">Request</a> object. If a block is
                  given, it will be invoked when the server responds.</p>
                  
                  <p>The :data property of the response will contain the requested data,
                  assuming the call was successful.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">request</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-value">0</span>, <span class="ruby-value">1024</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">eof?</span>&#x000A;    <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;end of file reached before reading any data&quot;</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">response</span>.<span class="ruby-identifier">ok?</span>&#x000A;    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;error (#{response})&quot;</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">print</span>(<span class="ruby-identifier">response</span>[:<span class="ruby-identifier">data</span>])&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;<span class="ruby-identifier">request</span>.<span class="ruby-identifier">wait</span></pre>
                  
                  <p>To read an entire file will usually require multiple calls to <a
                  href="Session.html#method-i-read">read</a>, unless you know in advance how
                  large the file is.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-read-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-read-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 246</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:read</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-read-21'>
                <a name='method-i-read-21'></a>
                <div class='synopsis'>
                  <span class='name'>read!</span>
                  <span class='arguments'>(handle, offset, length, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-read">read</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. If the end of the file was reached, <code>nil</code> will be
                  returned. Otherwise, it returns the data that was read, as a String.</p>
                  
                  <pre>data = sftp.read!(handle, 0, 1024)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-read-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-read-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 256</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">read!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:data</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-readdir'>
                <a name='method-i-readdir'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>readdir(handle) -> request</div>
                    <div>raeddir(handle) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Reads a set of entries from the given directory handle (which must have
                  been obtained via <a href="Session.html#method-i-opendir">opendir</a>). If
                  the response is EOF, then there are no more entries in the directory.
                  Otherwise, the entries will be in the :names property of the response:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>&#x000A;  <span class="ruby-identifier">request</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">readdir</span>(<span class="ruby-identifier">handle</span>).<span class="ruby-identifier">wait</span>&#x000A;  <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">eof?</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;fail!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">ok?</span>&#x000A;  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>[:<span class="ruby-identifier">names</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">entry</span><span class="ruby-operator">|</span>&#x000A;     <span class="ruby-identifier">puts</span> <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">name</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                  
                  <p>See also <a href="Protocol/V01/Name.html">Protocol::V01::Name</a> and <a
                  href="Protocol/V04/Name.html">Protocol::V04::Name</a> for the specific
                  properties of each individual entry (which vary based on the <a
                  href="../SFTP.html">SFTP</a> protocol version in use).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-readdir-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-readdir-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 439</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">readdir</span>(<span class="ruby-identifier">handle</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:readdir</span>, <span class="ruby-identifier">handle</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-readdir-21'>
                <a name='method-i-readdir-21'></a>
                <div class='synopsis'>
                  <span class='name'>readdir!</span>
                  <span class='arguments'>(handle, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-readdir">readdir</a>, but
                  blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return nil if there were no more names to
                  read, or an array of name entries.</p>
                  
                  <pre class="ruby"><span class="ruby-keyword">while</span> (<span class="ruby-identifier">entries</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">readdir!</span>(<span class="ruby-identifier">handle</span>)) <span class="ruby-keyword">do</span>&#x000A;  <span class="ruby-identifier">entries</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">entry</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span>(<span class="ruby-identifier">entry</span>.<span class="ruby-identifier">name</span>) }&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-readdir-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-readdir-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 451</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">readdir!</span>(<span class="ruby-identifier">handle</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">readdir</span>(<span class="ruby-identifier">handle</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:names</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-readlink'>
                <a name='method-i-readlink'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>readlink(path) -> request</div>
                    <div>readlink(path) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Queries the server for the target of the specified symbolic link. This
                  operation is only available in protocol versions 3 and higher. The response
                  to this request will include a names property, a one-element array naming
                  the target of the symlink.</p>
                  
                  <pre>request = sftp.readlink(&quot;/path/to/symlink&quot;).wait&#x000A;puts request.response[:names].first.name</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-readlink-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-readlink-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 604</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:readlink</span>, <span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-readlink-21'>
                <a name='method-i-readlink-21'></a>
                <div class='synopsis'>
                  <span class='name'>readlink!</span>
                  <span class='arguments'>(path, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-readlink">readlink</a>, but
                  blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the Name object for the path that
                  the symlink targets.</p>
                  
                  <pre>item = sftp.readlink!(&quot;/path/to/symlink&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-readlink-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-readlink-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 613</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">readlink!</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:names</span>).<span class="ruby-identifier">first</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-realpath'>
                <a name='method-i-realpath'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>realpath(path) -> request</div>
                    <div>realpath(path) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Tries to canonicalize the given path, turning any given path into an
                  absolute path. This is primarily useful for converting a path with ".." or
                  "." segments into an identical path without those segments. The answer will
                  be in the response's :names attribute, as a one-element array.</p>
                  
                  <pre>request = sftp.realpath(&quot;/path/../to/../directory&quot;).wait&#x000A;puts request[:names].first.name</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-realpath-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-realpath-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 534</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:realpath</span>, <span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-realpath-21'>
                <a name='method-i-realpath-21'></a>
                <div class='synopsis'>
                  <span class='name'>realpath!</span>
                  <span class='arguments'>(path, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-realpath">realpath</a>, but
                  blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return a name object identifying the path.</p>
                  
                  <pre>puts(sftp.realpath!(&quot;/path/../to/../directory&quot;))</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-realpath-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-realpath-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 543</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">realpath!</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:names</span>).<span class="ruby-identifier">first</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-remove'>
                <a name='method-i-remove'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>remove(filename) -> request</div>
                    <div>remove(filename) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Attempts to remove the given file from the remote file system. Returns
                  immediately with a <a href="Request.html">Request</a> object. If a block is
                  given, the block will be invoked when the server responds, and will be
                  passed a <a href="Response.html">Response</a> object.</p>
                  
                  <pre>sftp.remove(&quot;/path/to/file&quot;).wait</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-remove-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-remove-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 465</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove</span>(<span class="ruby-identifier">filename</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:remove</span>, <span class="ruby-identifier">filename</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-remove-21'>
                <a name='method-i-remove-21'></a>
                <div class='synopsis'>
                  <span class='name'>remove!</span>
                  <span class='arguments'>(filename, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-remove">remove</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                  
                  <pre>sftp.remove!(&quot;/path/to/file&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-remove-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-remove-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 474</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove!</span>(<span class="ruby-identifier">filename</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">remove</span>(<span class="ruby-identifier">filename</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-rename'>
                <a name='method-i-rename'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>rename(name, new_name, flags=nil) -> request</div>
                    <div>rename(name, new_name, flags=nil) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Renames the given file. This operation is only available in <a
                  href="../SFTP.html">SFTP</a> protocol versions two and higher. The
                  <code>flags</code> parameter is ignored in versions prior to 5. In versions
                  5 and higher, the <code>flags</code> parameter can be used to specify how
                  the rename should be performed (atomically, etc.).</p>
                  
                  <p>The following flags are defined in protocol version 5:</p>
                  <ul><li>
                  <p>0x0001 - overwrite an existing file if the new name specifies a file that
                  already exists.</p>
                  </li><li>
                  <p>0x0002 - perform the rewrite atomically.</p>
                  </li><li>
                  <p>0x0004 - allow the server to perform the rename as it prefers.</p>
                  </li></ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-rename-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-rename-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 580</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:rename</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-rename-21'>
                <a name='method-i-rename-21'></a>
                <div class='synopsis'>
                  <span class='name'>rename!</span>
                  <span class='arguments'>(name, new_name, flags=nil, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-rename">rename</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                  
                  <pre>sftp.rename!(&quot;/path/to/old&quot;, &quot;/path/to/new&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-rename-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-rename-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 589</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename!</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">rename</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-rmdir'>
                <a name='method-i-rmdir'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>rmdir(path) -> request</div>
                    <div>rmdir(path) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Removes the named directory on the remote server. The directory must be
                  empty before it can be removed.</p>
                  
                  <pre>sftp.rmdir(&quot;/path/to/directory&quot;).wait</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-rmdir-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-rmdir-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 509</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:rmdir</span>, <span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-rmdir-21'>
                <a name='method-i-rmdir-21'></a>
                <div class='synopsis'>
                  <span class='name'>rmdir!</span>
                  <span class='arguments'>(path, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-rmdir">rmdir</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                  
                  <pre>sftp.rmdir!(&quot;/path/to/directory&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-rmdir-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-rmdir-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 518</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">rmdir!</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">path</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-send_packet'>
                <a name='method-i-send_packet'></a>
                <div class='synopsis'>
                  <span class='name'>send_packet</span>
                  <span class='arguments'>(type, *args)</span>
                </div>
                <div class='description'>
                  
                  <p>Formats, constructs, and sends an <a href="../SFTP.html">SFTP</a> packet of
                  the given type and with the given data. This does not block, but merely
                  enqueues the packet for sending and returns.</p>
                  
                  <p>You should probably use the operation methods, rather than building and
                  sending the packet directly. (See <a
                  href="Session.html#method-i-open">open</a>, <a
                  href="Session.html#method-i-close">close</a>, etc.)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-send_packet-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-send_packet-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 811</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">send_packet</span>(<span class="ruby-identifier">type</span>, *<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-identifier">data</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(*<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-identifier">msg</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-value">:long</span>, <span class="ruby-identifier">data</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-value">:byte</span>, <span class="ruby-identifier">type</span>, <span class="ruby-value">:raw</span>, <span class="ruby-identifier">data</span>)&#x000A;  <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">send_data</span>(<span class="ruby-identifier">msg</span>.<span class="ruby-identifier">to_s</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-setstat'>
                <a name='method-i-setstat'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>setstat(path, attrs) -> request</div>
                    <div>setstat(path, attrs) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>This method may be used to set file metadata (such as permissions, or
                  user/group information) on a remote file. The exact metadata that may be
                  tweaked is dependent on the <a href="../SFTP.html">SFTP</a> protocol
                  version in use, but in general you may set at least the permissions, user,
                  and group. (See <a
                  href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
                  href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
                  href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a> for the
                  full lists of attributes that may be set for the different protocols.)</p>
                  
                  <p>The <code>attrs</code> parameter is a hash, where the keys are symbols
                  identifying the attributes to set.</p>
                  
                  <p>The method returns immediately with a <a href="Request.html">Request</a>
                  object. If a block is given, it will be invoked when the server responds.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">request</span> = <span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">setstat</span>(<span class="ruby-string">&quot;/path/to/file&quot;</span>, :<span class="ruby-identifier">permissions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0644</span>)&#x000A;<span class="ruby-identifier">request</span>.<span class="ruby-identifier">wait</span>&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;success: #{request.response.ok?}&quot;</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-setstat-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-setstat-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 361</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">setstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:setstat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-setstat-21'>
                <a name='method-i-setstat-21'></a>
                <div class='synopsis'>
                  <span class='name'>setstat!</span>
                  <span class='arguments'>(path, attrs, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to the <a href="Session.html#method-i-setstat">setstat</a>
                  method, but blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">sftp</span>.<span class="ruby-identifier">setstat!</span>(<span class="ruby-string">&quot;/path/to/file&quot;</span>, :<span class="ruby-identifier">permissions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0644</span>)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-setstat-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-setstat-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 370</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">setstat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">setstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-stat'>
                <a name='method-i-stat'></a>
                <div class='synopsis'>
                  <span class='name'>stat</span>
                  <span class='arguments'>(path, flags=nil, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to the <a href="Session.html#method-i-lstat">lstat</a> method,
                  except that it follows symlinks (e.g., if you give it the path to a
                  symlink, it will stat the target of the symlink rather than the symlink
                  itself). See the <a href="Session.html#method-i-lstat">lstat</a> method for
                  full documentation.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-stat-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-stat-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 551</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:stat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-stat-21'>
                <a name='method-i-stat-21'></a>
                <div class='synopsis'>
                  <span class='name'>stat!</span>
                  <span class='arguments'>(path, flags=nil, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-stat">stat</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return an attribute object for the named
                  path.</p>
                  
                  <pre>attrs = sftp.stat!(&quot;/path/to/file&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-stat-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-stat-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 560</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">stat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, &amp;<span class="ruby-identifier">callback</span>), <span class="ruby-value">:attrs</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-symlink'>
                <a name='method-i-symlink'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>symlink(path, target) -> request</div>
                    <div>symlink(path, target) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Attempts to create a symlink to <code>path</code> at <code>target</code>.
                  This operation is only available in protocol versions 3, 4, and 5, but the
                  <a href="../SFTP.html">Net::SFTP</a> library mimics the symlink behavior in
                  protocol version 6 using the <a href="Session.html#method-i-link">link</a>
                  method, so it is safe to use this method in protocol version 6.</p>
                  
                  <pre>sftp.symlink(&quot;/path/to/file&quot;, &quot;/path/to/symlink&quot;).wait</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-symlink-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-symlink-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 627</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">symlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:symlink</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-symlink-21'>
                <a name='method-i-symlink-21'></a>
                <div class='synopsis'>
                  <span class='name'>symlink!</span>
                  <span class='arguments'>(path, target, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-symlink">symlink</a>, but
                  blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                  
                  <pre>sftp.symlink!(&quot;/path/to/file&quot;, &quot;/path/to/symlink&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-symlink-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-symlink-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 636</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">symlink!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">symlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unblock'>
                <a name='method-i-unblock'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>unblock(handle, offset, length) -> request</div>
                    <div>unblock(handle, offset, length) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Removes a previously created byte-range lock. This operation is only
                  available in protocol versions 6 and higher. The <code>offset</code> and
                  <code>length</code> parameters must exactly match those that were given to
                  <a href="Session.html#method-i-block">block</a> when the lock was acquired.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unblock-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unblock-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 710</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unblock</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:unblock</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unblock-21'>
                <a name='method-i-unblock-21'></a>
                <div class='synopsis'>
                  <span class='name'>unblock!</span>
                  <span class='arguments'>(handle, offset, length, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-unblock">unblock</a>, but
                  blocks until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful. Otherwise, it will return the <a
                  href="Response.html">Response</a> object for the request.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unblock-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unblock-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 717</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unblock!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">unblock</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-upload'>
                <a name='method-i-upload'></a>
                <div class='synopsis'>
                  <span class='name'>upload</span>
                  <span class='arguments'>(local, remote = File.basename(local), options={}, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Initiates an upload from <code>local</code> to <code>remote</code>,
                  asynchronously. This method will return a new <a
                  href="Operations/Upload.html">Net::SFTP::Operations::Upload</a> instance,
                  and requires the event loop to be run in order for the upload to progress.
                  See <a href="Operations/Upload.html">Net::SFTP::Operations::Upload</a> for
                  a full discussion of how this method can be used.</p>
                  
                  <pre>uploader = sftp.upload(&quot;/local/path&quot;, &quot;/remote/path&quot;)&#x000A;uploader.wait</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-upload-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-upload-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 97</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">upload</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">local</span>), <span class="ruby-identifier">options</span>={}, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Upload</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-upload-21'>
                <a name='method-i-upload-21'></a>
                <div class='synopsis'>
                  <span class='name'>upload!</span>
                  <span class='arguments'>(local, remote = File.basename(local), options={}, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-upload">upload</a>, but blocks
                  until the upload is complete.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-upload-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-upload-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 102</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">upload!</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">local</span>), <span class="ruby-identifier">options</span>={}, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">upload</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>).<span class="ruby-identifier">wait</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-write'>
                <a name='method-i-write'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>write(handle, offset, data) -> request</div>
                    <div>write(handle, offset, data) { |response| ... } -> request</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Requests that <code>data</code> be written to the file identified by
                  <code>handle</code>, starting at <code>offset</code> bytes from the start
                  of the file. The file must have been opened for writing via <a
                  href="Session.html#method-i-open">open</a>. Returns immediately with a <a
                  href="Request.html">Request</a> object. If a block is given, it will be
                  invoked when the server responds.</p>
                  
                  <pre>request = sftp.write(handle, 0, &quot;hello, world!\n&quot;)&#x000A;request.wait</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-write-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-write-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 272</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">write</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">request</span> <span class="ruby-value">:write</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, &amp;<span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-write-21'>
                <a name='method-i-write-21'></a>
                <div class='synopsis'>
                  <span class='name'>write!</span>
                  <span class='arguments'>(handle, offset, data, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Identical to <a href="Session.html#method-i-write">write</a>, but blocks
                  until the server responds. It will raise a <a
                  href="StatusException.html">StatusException</a> if the request was
                  unsuccessful, or the end of the file was reached. Otherwise, it returns the
                  <a href="Response.html">Response</a> object for this request.</p>
                  
                  <pre>sftp.write!(handle, 0, &quot;hello, world!\n&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-write-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-write-21-source'><span class="ruby-comment"># File lib/net/sftp/session.rb, line 281</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">write!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">write</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, &amp;<span class="ruby-identifier">callback</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
